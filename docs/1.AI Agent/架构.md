---
title: Agent架构
tags:
  - agent
  - 架构
createTime: 2025-10-21 23:44:31
permalink: /article/introduce_mcp/
---

### ReAct结构
Resoning and Acting，核心思想：观察-思考-行动
- 观察：起始为用户输入，后续为每一轮的工具结果
- 思考：对当前收集到的信息，进行判断，选择下一步的动作
- 行动：执行选择的动作（外部工具）

LLM的角色转变，不再单独生成内容，而是更像控制器。不断思考，形成新的执行任务

==与COT相比==，

COT是依赖==内部知识==，==逐步进行思考==；更容易==陷入幻觉==、或传播错误
而ReAct是依赖==外部知识==，逐步进行思考-行动，不断与环境（外部工具）进行==交互==；

==ReAct优点==：
- 动态灵活：与环境实时交互，动态适应性强
- 可解释：显式的推理轨迹，决策过程和结果可解释

==ReAct缺点==：
- token耗费多：每一轮Act（工具调用）后，都需要进行一次LLM调用
- 短视、局部最优：每次只规划下一步，规划短视

==场景==：
信息检索、知识密集型问答

### plan-execute架构
![MCP](/images/agent/plan_execute_structure.png)
核心思想：
- 将工作流程分成两个独立的阶段
- plan进行一次详细的规划
- execute会执行plan的每个步骤，无需每次执行完都进行思考

==优点==：
- 显著减少调用次数
- 全局的规划，有助于避免局部最优
- 可以并行的执行所有步骤

==缺点==：
- 鲁棒性差：计划是静态的，对于突发情况（一个步骤失败），可能没法灵活解决
- 一些replan等机制有助于提升鲁棒性

==适应场景==：
- 流程固定、但步骤多
- 自动化报告、数据分析


### ReWOO
==Re==asoning ==W==ith==o==ut ==O==bservation，无观察推理，plan-execute的高效变体

![rewoo](/images/agent/rewoo_structure.png)

- plan生成一个完整的，包含占位符的计划
- worker执行改计划
- solver对执行结果汇总，生成答案

==区别==
- ReWOO使用了占位符，通过占位符在步骤之间传递结果（单向，只能由前面的步骤往后传）
- plan-execute各个步骤是独立的，只有最终汇集时才能看到
- ReWOO的工具必须是顺序执行的

==优点==
- token耗费少
- 能避免工具重复调用

==缺点==
- 鲁棒性不高

==适应场景==
- 工具结果传递
- 查询LPL中单选手近五年的KDA变化，先查选手，再根据结果查近五年KDA

### LLM Compiler

![LLM Compiler](/images/agent/llm_compiler_structure.png)

- plan规划成DAG
    - 搜 #1
    - 搜 #2
    - 计算(#1,#2) -> #3 
    - LLM(#3)


==优点==
- DAG中没有依赖的任务，可以并发执行

==缺点==
- 管理复杂
- 鲁棒性

==场景==
- 适合独立的信息源对比、调用多个API完成
- 电商比价、多源数据融合


### basic Reflection
![rewoo](/images/agent/llm_compiler_structure.png)

- 任务输出完成后，使用LLM对结果进行“反思”
- 若需要修正，则进行输出修改

==优点==
- 能避免有害性输出

==缺点==
- 复杂问题下，反思可能并不能有效
- 且仅依赖自身知识，容易陷入自我循环中

==场景==
- 写作场景，对逻辑和格式进行以下反思