<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.157" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" type="image/jpg" href="/blogger.jpg"><title>LLM的权重文件格式 | majin</title><meta name="description" content=""><link rel="preload" href="/assets/style-DDKN9_aW.css" as="style"><link rel="stylesheet" href="/assets/style-DDKN9_aW.css"><link rel="modulepreload" href="/assets/app-KjTT_h7t.js"><link rel="modulepreload" href="/assets/index.html-DAoIxXAF.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-c65f7727><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-bed66c22></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-bed66c22> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-c65f7727 data-v-dc00e0f2><div class="vp-navbar" vp-navbar data-v-dc00e0f2 data-v-eca676eb><div class="wrapper" data-v-eca676eb><div class="container" data-v-eca676eb><div class="title" data-v-eca676eb><div class="vp-navbar-title" data-v-eca676eb data-v-4828c0fc><a class="vp-link link no-icon title" href="/" data-v-4828c0fc><!--[--><!--[--><!--]--><!----><span data-v-4828c0fc>majin</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-eca676eb><div class="content-body" data-v-eca676eb><!--[--><!--]--><div class="vp-navbar-search search" data-v-eca676eb><div class="search-wrapper" data-v-cb3e0943><!----><div id="local-search" data-v-cb3e0943><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-cb3e0943><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-eca676eb data-v-a86d55ed><span id="main-nav-aria-label" class="visually-hidden" data-v-a86d55ed>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-a86d55ed data-v-7a6bcf52><!--[--><!----><span data-v-7a6bcf52>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-a86d55ed data-v-7a6bcf52><!--[--><!----><span data-v-7a6bcf52>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-a86d55ed data-v-7a6bcf52><!--[--><!----><span data-v-7a6bcf52>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-a86d55ed data-v-7a6bcf52><!--[--><!----><span data-v-7a6bcf52>归档</span><!----><!--]--><!----></a><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-eca676eb data-v-c8c80ec6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-c8c80ec6 data-v-d35535d4 data-v-d395b6c4><span class="check" data-v-d395b6c4><span class="icon" data-v-d395b6c4><!--[--><span class="vpi-sun sun" data-v-d35535d4></span><span class="vpi-moon moon" data-v-d35535d4></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-eca676eb data-v-ae0696b4 data-v-3c959de6><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-3c959de6 data-v-eebc891d><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-eca676eb data-v-d73459e2 data-v-97091a75><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-97091a75><span class="vpi-more-horizontal icon" data-v-97091a75></span></button><div class="menu" data-v-97091a75><div class="vp-menu" data-v-97091a75 data-v-7d8c6914><!----><!--[--><!--[--><!----><div class="group" data-v-d73459e2><div class="item appearance" data-v-d73459e2><p class="label" data-v-d73459e2>外观</p><div class="appearance-action" data-v-d73459e2><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-d73459e2 data-v-d35535d4 data-v-d395b6c4><span class="check" data-v-d395b6c4><span class="icon" data-v-d395b6c4><!--[--><span class="vpi-sun sun" data-v-d35535d4></span><span class="vpi-moon moon" data-v-d35535d4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d73459e2><div class="item social-links" data-v-d73459e2><div class="vp-social-links social-links-list" data-v-d73459e2 data-v-3c959de6><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-3c959de6 data-v-eebc891d><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-eca676eb data-v-e737b135><span class="container" data-v-e737b135><span class="top" data-v-e737b135></span><span class="middle" data-v-e737b135></span><span class="bottom" data-v-e737b135></span></span></button></div></div></div></div><div class="divider" data-v-eca676eb><div class="divider-line" data-v-eca676eb></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-c65f7727 data-v-6e03a609><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-6e03a609><span class="vpi-align-left menu-icon" data-v-6e03a609></span><span class="menu-text" data-v-6e03a609>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-6e03a609 data-v-d75301e9><button data-v-d75301e9>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-c65f7727 data-v-f95c1c5f><div class="vp-doc-container is-blog" data-v-f95c1c5f data-v-00837af9><!--[--><!--]--><div class="container" data-v-00837af9><!----><div class="content" data-v-00837af9><div class="content-container" data-v-00837af9><!--[--><!--]--><main class="main" data-v-00837af9><nav class="vp-breadcrumb" data-v-00837af9 data-v-d7544bfb><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-d7544bfb><!--[--><li property="itemListElement" typeof="ListItem" data-v-d7544bfb><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-d7544bfb><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-d7544bfb></span><meta property="name" content="首页" data-v-d7544bfb><meta property="position" content="1" data-v-d7544bfb></li><li property="itemListElement" typeof="ListItem" data-v-d7544bfb><a class="vp-link link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-d7544bfb><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-d7544bfb></span><meta property="name" content="博客" data-v-d7544bfb><meta property="position" content="2" data-v-d7544bfb></li><li property="itemListElement" typeof="ListItem" data-v-d7544bfb><a class="vp-link link breadcrumb" href="/blog/categories/?id=8453e9" property="item" typeof="WebPage" data-v-d7544bfb><!--[-->基础知识<!--]--><!----></a><span class="vpi-chevron-right" data-v-d7544bfb></span><meta property="name" content="基础知识" data-v-d7544bfb><meta property="position" content="3" data-v-d7544bfb></li><li property="itemListElement" typeof="ListItem" data-v-d7544bfb><a class="vp-link link breadcrumb" href="/blog/categories/?id=1f04d9" property="item" typeof="WebPage" data-v-d7544bfb><!--[-->文件格式<!--]--><!----></a><span class="vpi-chevron-right" data-v-d7544bfb></span><meta property="name" content="文件格式" data-v-d7544bfb><meta property="position" content="4" data-v-d7544bfb></li><li property="itemListElement" typeof="ListItem" data-v-d7544bfb><a class="vp-link link breadcrumb current" href="/article/adblghyo/" property="item" typeof="WebPage" data-v-d7544bfb><!--[-->LLM的权重文件格式<!--]--><!----></a><!----><meta property="name" content="LLM的权重文件格式" data-v-d7544bfb><meta property="position" content="5" data-v-d7544bfb></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-d1b68b8b>LLM的权重文件格式 <!----></h1><div class="vp-doc-meta" data-v-d1b68b8b><!--[--><!--]--><p class="reading-time" data-v-d1b68b8b><span class="vpi-books icon" data-v-d1b68b8b></span><span data-v-d1b68b8b>约 893 字</span><span data-v-d1b68b8b>大约 3 分钟</span></p><p data-v-d1b68b8b><span class="vpi-tag icon" data-v-d1b68b8b></span><!--[--><a class="vp-link link tag vp-tag-pxno" href="/blog/tags/?tag=基础知识" data-v-d1b68b8b><!--[-->基础知识<!--]--><!----></a><a class="vp-link link tag vp-tag-8h0z" href="/blog/tags/?tag=LLM权重文件" data-v-d1b68b8b><!--[-->LLM权重文件<!--]--><!----></a><!--]--></p><!--[--><!--]--><p class="create-time" data-v-d1b68b8b><span class="vpi-clock icon" data-v-d1b68b8b></span><span data-v-d1b68b8b>2025-12-25</span></p></div><!--]--><!--[--><!--]--><div class="_article_adblghyo_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-00837af9><!--[--><!--]--><div data-v-00837af9><h2 id="gguf文件格式" tabindex="-1"><a class="header-anchor" href="#gguf文件格式"><span>GGUF文件格式</span></a></h2><h3 id="是什么" tabindex="-1"><a class="header-anchor" href="#是什么"><span>是什么</span></a></h3><ul><li>GGUF（GG Unified Format）是为本地推理生态（以 llama.cpp 为代表）设计的自描述二进制权重格式，继承自 GGML/GGJT，面向量化与跨平台分发。</li><li>文件内包含模型张量、量化信息、超参数、词表与分词器配置、特殊 token、RoPE/位置编码等关键元数据，通常以 <code>.gguf</code> 结尾。</li></ul><h3 id="有哪些好处" tabindex="-1"><a class="header-anchor" href="#有哪些好处"><span>有哪些好处</span></a></h3><ul><li>自描述与可移植：权重与必要元数据打包在一起，避免依赖外部 tokenizer/配置文件，便于一键分发与还原环境。</li><li>加载高效：为内存映射（mmap）与顺序对齐优化，启动更快、峰值内存更低，适合边缘与多平台部署。</li><li>量化友好：原生支持多种量化（如 Q2/Q3/Q4/Q5/Q8、K-quant 等），在保持较好精度的同时显著减小体积与显存占用。</li><li>跨平台一致性：显式版本化与端序/对齐约束，提升在 Windows、Linux、macOS 及不同后端（CPU、Metal、CUDA、OpenCL）上的一致行为。</li><li>生态广：被 llama.cpp 及其多语言绑定和诸多本地 UI/服务广泛支持，转换与使用门槛低。</li><li>可扩展与向后兼容：通过结构化元数据与版本字段演进新能力，同时维持旧版本可读性。</li></ul><h3 id="典型使用" tabindex="-1"><a class="header-anchor" href="#典型使用"><span>典型使用</span></a></h3><ul><li>从 HuggingFace/PyTorch 权重转换为 GGUF（含量化），然后在 llama.cpp/本地推理服务中直接加载与推理。</li><li>单机或边缘设备部署，通过选择合适的量化方案在速度、显存与质量间平衡。</li></ul><blockquote><p>注：与通用的 <code>safetensors</code>/<code>.pt</code> 相比，GGUF在“自带元数据 + 量化加载效率 + 本地生态支持”方面更突出；而在跨框架通用性与训练侧工作流上，前者依然有优势。</p></blockquote><h3 id="用白话说" tabindex="-1"><a class="header-anchor" href="#用白话说"><span>用白话说</span></a></h3><ul><li>把 GGUF 想象成“带说明书的压缩包”。模型需要的零件（权重）和说明书（分词器、配置、特殊标记）都在一个包里，拿到就能装上车跑。</li><li>它对“瘦身”很友好：能把模型做多种程度的瘦身（量化），手机/轻薄本也能带得动。</li><li>打开速度快、占内存少：像看视频直接“边看边读”（mmap），不必一次性全部解压到内存。</li><li>到处能用：Windows、Linux、macOS 都能跑，CPU、GPU 也都照顾到。</li><li>生态好：很多本地推理工具原生支持，基本属于“装好即用”的格式。</li></ul><h3 id="与量化的关系" tabindex="-1"><a class="header-anchor" href="#与量化的关系"><span>与量化的关系</span></a></h3><ul><li>原生存储量化信息：GGUF 在文件头与张量元数据里记录每个张量的量化类型、比例尺（scale）、零点（zero-point）等，使加载端无需额外配置即可正确解释量化权重。</li><li>多种位宽与方案：支持 Q2/Q3/Q4/Q5/Q8 以及 K-quant 系列等不同策略，也支持按张量/按块的混合精度，以更好平衡质量与体积/吞吐。</li><li>高效加载与推理：配合 llama.cpp 等内核，量化权重可直接参与推理（按需反量化或以内核优化形式计算），减少内存与带宽开销。</li><li>转换链路清晰：通常从 FP16/FP32 的原始权重经转换/量化脚本产出 <code>.gguf</code> 文件；推理侧直接读取，无需额外依赖分词器或配置文件。</li><li>取舍提示：位宽越低，模型越小、速度越快，但可能带来精度下降；可按层/模块使用更高位宽保留关键能力，形成混合量化。</li></ul></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-00837af9 data-v-6c6ea141><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-6c6ea141><span class="contributors-label" data-v-6c6ea141>贡献者: </span><span class="contributors-info" data-v-6c6ea141><!--[--><!--[--><span class="contributor" data-v-6c6ea141>majinsuper</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-6c6ea141><div class="pager" data-v-6c6ea141><!----></div><div class="pager" data-v-6c6ea141><a class="vp-link link pager-link next" href="/article/abcntm9r/" data-v-6c6ea141><!--[--><span class="desc" data-v-6c6ea141>下一页</span><span class="title" data-v-6c6ea141>06. 词嵌入</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button type="button" class="vp-back-to-top" aria-label="back to top" data-v-c65f7727 style="display:none;" data-v-fc53d5da><span class="percent" data-allow-mismatch data-v-fc53d5da>0%</span><span class="show icon vpi-back-to-top" data-v-fc53d5da></span><svg aria-hidden="true" data-v-fc53d5da><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-fc53d5da></circle></svg></button><footer class="vp-footer" vp-footer data-v-c65f7727 data-v-20b8cfc9><!--[--><div class="container" data-v-20b8cfc9><!----><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-KjTT_h7t.js" defer></script></body></html>